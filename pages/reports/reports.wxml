<view class="container">
  <!-- æ—¥æœŸé€‰æ‹© -->
  <view class="date-section">
    <view class="section-title">æŠ¥è¡¨æ—¥æœŸèŒƒå›´</view>
    <view class="date-row">
      <picker
        mode="date"
        value="{{dateRange.start}}"
        bindchange="onStartDateChange"
      >
        <view class="date-picker">
          <text class="date-label">å¼€å§‹æ—¥æœŸ</text>
          <text class="date-value">{{dateRange.start}}</text>
        </view>
      </picker>
      
      <text class="date-separator">è‡³</text>
      
      <picker
        mode="date"
        value="{{dateRange.end}}"
        bindchange="onEndDateChange"
      >
        <view class="date-picker">
          <text class="date-label">ç»“æŸæ—¥æœŸ</text>
          <text class="date-value">{{dateRange.end}}</text>
        </view>
      </picker>
    </view>
  </view>

  <!-- æ±‡æ€»ç»Ÿè®¡ -->
  <view class="summary-section">
    <view class="section-title">æ±‡æ€»ç»Ÿè®¡</view>
    <view class="summary-grid">
      <view class="summary-item">
        <view class="summary-number">{{summary.totalMaterials}}</view>
        <view class="summary-label">ç‰©æ–™ç§ç±»</view>
      </view>
      <view class="summary-item">
        <view class="summary-number">Â¥{{summary.totalBeginningValue.toFixed(2)}}</view>
        <view class="summary-label">æœŸåˆä»·å€¼</view>
      </view>
      <view class="summary-item">
        <view class="summary-number">Â¥{{summary.totalInboundValue.toFixed(2)}}</view>
        <view class="summary-label">æœŸé—´å…¥åº“</view>
      </view>
      <view class="summary-item">
        <view class="summary-number">Â¥{{summary.totalOutboundValue.toFixed(2)}}</view>
        <view class="summary-label">æœŸé—´å‡ºåº“</view>
      </view>
      <view class="summary-item">
        <view class="summary-number">Â¥{{summary.totalEndingValue.toFixed(2)}}</view>
        <view class="summary-label">æœŸæœ«ä»·å€¼</view>
      </view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-section">
    <view class="btn-row">
      <view class="btn-secondary" bindtap="onToggleDetail">
        {{showDetail ? 'éšè—è¯¦æƒ…' : 'æ˜¾ç¤ºè¯¦æƒ…'}}
      </view>
      <view class="btn-primary" bindtap="onExportReport">
        å¯¼å‡ºæ•°æ®
      </view>
    </view>
    <view class="btn-danger" bindtap="onClearAllData">
      æ¸…ç©ºæ‰€æœ‰æ•°æ®
    </view>
  </view>

  <!-- è¯¦ç»†æŠ¥è¡¨ -->
  <view class="detail-section" wx:if="{{showDetail && reportData.length > 0}}">
    <view class="section-title">ç‰©æ–™æ˜ç»†æŠ¥è¡¨</view>
    
    <!-- è¡¨å¤´ -->
    <view class="table-header">
      <view class="header-cell name">ç‰©æ–™åç§°</view>
      <view class="header-cell">æœŸåˆ</view>
      <view class="header-cell">å…¥åº“</view>
      <view class="header-cell">å‡ºåº“</view>
      <view class="header-cell">æœŸæœ«</view>
    </view>
    
    <!-- è¡¨æ ¼å†…å®¹ -->
    <view class="table-body">
      <view 
        class="table-row"
        wx:for="{{reportData}}" 
        wx:key="materialId"
        bindtap="onViewMaterialDetail"
        data-item="{{item}}"
      >
        <view class="body-cell name">
          <view class="material-name">{{item.materialName}}</view>
          <view class="material-spec">{{item.specification}}</view>
        </view>
        <view class="body-cell">
          <view class="cell-quantity">{{item.beginningStock}}{{item.unit}}</view>
          <view class="cell-value">Â¥{{item.beginningValue.toFixed(2)}}</view>
        </view>
        <view class="body-cell">
          <view class="cell-quantity">{{item.periodInbound}}{{item.unit}}</view>
          <view class="cell-value">Â¥{{item.periodInboundValue.toFixed(2)}}</view>
        </view>
        <view class="body-cell">
          <view class="cell-quantity">{{item.periodOutbound}}{{item.unit}}</view>
          <view class="cell-value">Â¥{{item.periodOutboundValue.toFixed(2)}}</view>
        </view>
        <view class="body-cell">
          <view class="cell-quantity">{{item.endingStock}}{{item.unit}}</view>
          <view class="cell-value">Â¥{{item.endingValue.toFixed(2)}}</view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{showDetail && reportData.length === 0}}">
    <view class="empty-icon">ğŸ“Š</view>
    <view class="empty-text">é€‰æ‹©çš„æ—¥æœŸèŒƒå›´å†…æš‚æ— æ•°æ®</view>
  </view>

  <!-- è¯´æ˜ -->
  <view class="info-section">
    <view class="info-title">è¯´æ˜</view>
    <view class="info-content">
      <view class="info-item">â€¢ æˆæœ¬æ ¸ç®—é‡‡ç”¨å…ˆè¿›å…ˆå‡º(FIFO)åŸåˆ™</view>
      <view class="info-item">â€¢ æœŸåˆ/æœŸæœ«ä»·å€¼åŸºäºå½“æ—¶çš„æ‰¹æ¬¡å•ä»·è®¡ç®—</view>
      <view class="info-item">â€¢ å¯¼å‡ºåŠŸèƒ½å¯å¤‡ä»½æ‰€æœ‰æ•°æ®</view>
      <view class="info-item">â€¢ æ¸…ç©ºæ•°æ®æ“ä½œä¸å¯æ¢å¤ï¼Œè¯·è°¨æ…ä½¿ç”¨</view>
    </view>
  </view>
</view>
