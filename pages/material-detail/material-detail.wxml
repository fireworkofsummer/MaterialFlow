<view class="container" wx:if="{{material}}">
  <!-- ç‰©æ–™åŸºæœ¬ä¿¡æ¯ -->
  <view class="card">
    <view class="material-header">
      <view class="material-title">
        <view class="material-name">{{material.name}}</view>
        <view class="warning-badge" wx:if="{{isLowStock}}">
          <text class="warning-icon">âš ï¸</text>
          åº“å­˜ä¸è¶³
        </view>
      </view>
      <view class="material-spec">{{material.specification}}</view>
    </view>
    
    <view class="material-info">
      <view class="info-row">
        <text class="info-label">ç‰©æ–™åˆ†ç±»</text>
        <text class="info-value">{{material.category || 'æœªåˆ†ç±»'}}</text>
      </view>
      <view class="info-row">
        <text class="info-label">å•ä½</text>
        <text class="info-value">{{material.unit}}</text>
      </view>
      <view class="info-row" wx:if="{{material.minStockAlert}}">
        <text class="info-label">é¢„è­¦çº¿</text>
        <text class="info-value">{{material.minStockAlert}}{{material.unit}}</text>
      </view>
      <view class="info-row" wx:if="{{material.supplier}}">
        <text class="info-label">ä¾›åº”å•†</text>
        <text class="info-value">{{material.supplier}}</text>
      </view>
      <view class="info-row" wx:if="{{material.remark}}">
        <text class="info-label">å¤‡æ³¨</text>
        <text class="info-value">{{material.remark}}</text>
      </view>
    </view>
  </view>

  <!-- åº“å­˜ç»Ÿè®¡ -->
  <view class="card">
    <view class="card-title">åº“å­˜ç»Ÿè®¡</view>
    <view class="stock-stats">
      <view class="stat-card">
        <view class="stat-number {{isLowStock ? 'text-warning' : 'text-primary'}}">
          {{currentStock}}{{material.unit}}
        </view>
        <view class="stat-label">å½“å‰åº“å­˜</view>
      </view>
      <view class="stat-card">
        <view class="stat-number text-success">Â¥{{currentValue.toFixed(2)}}</view>
        <view class="stat-label">åº“å­˜ä»·å€¼</view>
      </view>
    </view>
  </view>

  <!-- åº“å­˜æ‰¹æ¬¡ -->
  <view class="card" wx:if="{{stockBatches.length > 0}}">
    <view class="card-title">åº“å­˜æ‰¹æ¬¡ ({{stockBatches.length}})</view>
    <view class="batch-list">
      <view 
        class="batch-item"
        wx:for="{{stockBatches}}" 
        wx:key="id"
        bindtap="onViewBatch"
        data-batch="{{item}}"
      >
        <view class="batch-main">
          <view class="batch-date">{{item.inboundDate.split('T')[0]}}</view>
          <view class="batch-info">
            <text class="batch-quantity">{{item.remainingQuantity}}/{{item.originalQuantity}}{{material.unit}}</text>
            <text class="batch-price">Â¥{{item.unitPrice}}/{{material.unit}}</text>
          </view>
        </view>
        <view class="batch-value">
          Â¥{{item.batchValue}}
        </view>
      </view>
    </view>
  </view>

  <!-- æ— åº“å­˜æç¤º -->
  <view class="card" wx:else>
    <view class="empty-state">
      <view class="empty-icon">ğŸ“¦</view>
      <view class="empty-text">æš‚æ— åº“å­˜</view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-section">
    <view class="action-row">
      <view class="btn-primary" bindtap="onInbound">å…¥åº“</view>
      <view 
        class="btn-secondary {{currentStock <= 0 ? 'disabled' : ''}}" 
        bindtap="onOutbound"
      >
        å‡ºåº“
      </view>
    </view>
    <view class="action-row">
      <view class="btn-secondary" bindtap="onEditMaterial">ç¼–è¾‘ç‰©æ–™</view>
      <view class="btn-danger" bindtap="onDeleteMaterial">åˆ é™¤ç‰©æ–™</view>
    </view>
  </view>
</view>

<!-- åŠ è½½çŠ¶æ€ -->
<view class="loading" wx:else>
  <view class="loading-text">åŠ è½½ä¸­...</view>
</view>
