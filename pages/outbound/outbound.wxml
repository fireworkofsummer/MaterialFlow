<view class="container">
  <!-- ç­›é€‰åŒºåŸŸ -->
  <view class="filter-section">
    <view class="search-bar">
      <input
        class="search-input"
        placeholder="æœç´¢å‡ºåº“å•å·ã€é¢†æ–™äºº..."
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
      />
    </view>
    
    <view class="filter-row">
      <view class="date-range">
        <picker
          mode="date"
          value="{{dateRange.start}}"
          bindchange="onStartDateChange"
        >
          <view class="date-picker">
            {{dateRange.start || 'å¼€å§‹æ—¥æœŸ'}}
          </view>
        </picker>
        <text class="date-separator">è‡³</text>
        <picker
          mode="date"
          value="{{dateRange.end}}"
          bindchange="onEndDateChange"
        >
          <view class="date-picker">
            {{dateRange.end || 'ç»“æŸæ—¥æœŸ'}}
          </view>
        </picker>
      </view>
      
      <picker
        mode="selector"
        range="['æŒ‰æ—¥æœŸé™åº', 'æŒ‰æ—¥æœŸå‡åº', 'æŒ‰æˆæœ¬é™åº', 'æŒ‰æˆæœ¬å‡åº']"
        value="{{['date-desc', 'date-asc', 'amount-desc', 'amount-asc'].indexOf(sortBy)}}"
        bindchange="onSortChange"
      >
        <view class="sort-picker">æ’åº</view>
      </picker>
    </view>
  </view>

  <!-- å‡ºåº“è®°å½•åˆ—è¡¨ -->
  <view class="records-list" wx:if="{{filteredRecords.length > 0}}">
    <view 
      class="record-item"
      wx:for="{{filteredRecords}}" 
      wx:key="id"
    >
      <view class="record-header" bindtap="onViewDetail" data-record="{{item}}">
        <view class="record-number">{{item.outboundNumber}}</view>
        <view class="record-date">{{item.displayDate}}</view>
      </view>
      
      <view class="record-info">
        <view class="info-row">
          <text class="info-label">é¢†æ–™äºº/é¡¹ç›®:</text>
          <text class="info-value">{{item.recipient || 'æœªå¡«å†™'}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">ç»æ‰‹äºº:</text>
          <text class="info-value">{{item.operator || 'æœªå¡«å†™'}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">ç‰©æ–™ç§ç±»:</text>
          <text class="info-value">{{item.items.length}}ç§</text>
        </view>
      </view>
      
      <view class="record-footer">
        <view class="total-amount">
          <text class="amount-label">æ€»æˆæœ¬:</text>
          <text class="amount-value">Â¥{{item.totalCostFormatted}}</text>
        </view>
        <view class="record-actions">
          <view class="action-btn" bindtap="onViewDetail" data-record="{{item}}">
            è¯¦æƒ…
          </view>
          <view class="action-btn danger" bindtap="onDeleteRecord" data-id="{{item.id}}">
            åˆ é™¤
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:else>
    <view class="empty-icon">ğŸ“¤</view>
    <view class="empty-text">æš‚æ— å‡ºåº“è®°å½•</view>
    <view class="btn-primary" bindtap="onAddOutbound">åˆ›å»ºç¬¬ä¸€ä¸ªå‡ºåº“å•</view>
  </view>

  <!-- ç»Ÿè®¡ä¿¡æ¯ -->
  <view class="stats-card" wx:if="{{filteredRecords.length > 0}}">
    <view class="stats-item">
      <text class="stats-label">è®°å½•æ€»æ•°</text>
      <text class="stats-value">{{filteredRecords.length}}</text>
    </view>
    <view class="stats-item">
      <text class="stats-label">æ€»æˆæœ¬</text>
      <text class="stats-value">
        Â¥{{filteredTotalCost}}
      </text>
    </view>
  </view>

  <!-- æ·»åŠ æŒ‰é’® -->
  <view class="fab" bindtap="onAddOutbound" wx:if="{{filteredRecords.length > 0}}">
    <text class="fab-icon">+</text>
  </view>
</view>
